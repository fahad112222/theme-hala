{#
| Variable         | Type    | Description
|------------------|---------|-------------------------------
| cart             | object  |
| cart.items_count | int     |
| cart.total       | string  |
#}

{% set important_links = theme.settings.get('important_links') %}

<header class="store-header theme-beauty-header shadow-sm">

  {# ===================== TOP BAR ===================== #}
  <div class="top-navbar bg-[var(--color-primary-light)]/30 backdrop-blur-sm border-b border-black/5">
    <div class="container flex justify-between items-center py-2">

      <div class="flex items-center gap-4">

        {# Important links #}
        {% if important_links %}
          <div class="hidden lg:block text-sm opacity-80">
            <salla-menu source="footer" topnav></salla-menu>
          </div>
        {% endif %}

        {# Language & Currency #}
        {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
          <button
            type="button"
            class="btn--rounded-gray flex items-center gap-2 px-3 h-9 text-sm"
            onclick="salla.event.dispatch('localization::open')"
          >
            <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm"></span>
            <span class="opacity-40">|</span>
            <span>{{ currency.symbol }}</span>
          </button>
          <salla-localization-modal></salla-localization-modal>
        {% endif %}

        {# Branch selector #}
        {% if store.scope %}
          <button
            class="btn--rounded-gray flex items-center gap-1 h-9 px-3 text-sm"
            onclick="salla.event.dispatch('scopes::open', {'mode': 'default'})"
          >
            <i class="sicon-location"></i>
            <span>{{ store.scope.name }}</span>
          </button>
        {% endif %}
      </div>

      {# Contacts #}
      <salla-contacts is-header></salla-contacts>

    </div>
  </div>

  {# ===================== MAIN NAV ===================== #}
  <div class="main-nav-container bg-white/95 backdrop-blur border-b border-black/5">
    <div class="container">
      <div class="flex items-center justify-between min-h-[72px]">

        {# Left side #}
        <div class="flex items-center gap-4">

          {# Mobile menu #}
          <a
            href="#mobile-menu"
            class="lg:hidden"
            aria-label="{{ trans('common.menu') }}"
          >
            <i class="sicon-menu text-2xl text-[var(--color-primary-dark)]"></i>
          </a>

          {# Logo #}


          {# Main menu #}
          <custom-main-menu></custom-main-menu>
        </div>

        {# Right side #}
        <div class="flex items-center gap-3">

          {# Search #}
          <div class="hidden lg:block w-64">
            <salla-search inline oval height="38"></salla-search>
          </div>

          {# User menu #}
          {% if user.type == 'user' %}
            <salla-user-menu avatar-only show-header></salla-user-menu>
          {% else %}
            <button
              aria-label="{{ trans('common.login') }}"
              class="header-btn"
              onclick="salla.event.dispatch('login::open')"
            >
              <i class="sicon-user-circle text-xl"></i>
            </button>
          {% endif %}

          {# Cart #}
          <salla-cart-summary>
            <i
              slot="icon"
              class="sicon-shopping-bag text-xl text-[var(--color-primary-dark)]"
            ></i>
          </salla-cart-summary>

        </div>
      </div>
    </div>
  </div>
</header>

{# ===================== SCOPES MODAL ===================== #}
{% if store.scope %}
  <salla-scopes
    selection="{{ store.scope.display_as == 'popup' ? 'mandatory' : 'optional' }}"
  ></salla-scopes>
{% endif %}
